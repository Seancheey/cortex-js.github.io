<!doctype html><html class=no-js lang=en><meta charset=utf-8><title>CortexJS</title><meta content=""name=description><link href=/feed.xml rel=alternate title="CortexJS Feed"type=application/atom+xml><meta content="width=device-width,initial-scale=1"name=viewport><meta content=strict-origin name=referrer><script>document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';</script><script crossorigin=anonymous src=https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.1/codemirror.min.js></script><script crossorigin=anonymous src=https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.1/mode/javascript/javascript.min.js></script><script crossorigin=anonymous src=https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.1/mode/xml/xml.min.js></script><script crossorigin=anonymous src=/assets/js/code-playground.js type=module></script><link href=/assets/css/main.css rel=stylesheet><link href=https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.1/codemirror.min.css rel=stylesheet><link href=/assets/js/ui.css rel=stylesheet><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:100,100i,400,400i,700,700i,900,900i&display=block"rel=stylesheet crossorigin><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,400;0,700;1,400;1,700&family=IBM+Plex+Sans:ital,wght@0,400;0,700;1,400;1,700&display=block"rel=stylesheet crossorigin><script crossorigin=anonymous src=https://kit.fontawesome.com/523e3eb8bb.js></script><body class=layout--single><nav class=skip-links><h2 class=screen-reader-text>Skip links</h2><ul><li><a href=#site-nav class=screen-reader-shortcut>Skip to primary navigation</a><li><a href=#main class=screen-reader-shortcut>Skip to content</a><li><a href=#footer class=screen-reader-shortcut>Skip to footer</a></ul></nav><!--[if lt IE 9]><div class="notice--danger align-center"style=margin:0>You are using an <strong>outdated</strong> browser. Please <a href=https://browsehappy.com/ >upgrade your browser</a> to improve your experience.</div><![endif]--><div class=masthead><div class=masthead__inner-wrap><div class=masthead__menu><nav class=greedy-nav id=site-nav><a href=/ class=site-logo><img alt=""src=""></a><a href=/ class=site-title>Cortex<em>JS</em></a><ul class=visible-links><li class=masthead__menu-item><a href=/mathlive/ >MathLive</a><li class=masthead__menu-item><a href=/docs/ >Docs</a><li class=masthead__menu-item><a href=/funding/ >Funding</a><li class=masthead__menu-item><a href=https://gitter.im/cortex-js title="Chat on Gitter"><svg class=icon1em><use role=none xlink:href=/assets/icons.svg#gitter></use></svg></a><li class=masthead__menu-item><a href=https://github.com/cortex-js title="Get source code on GitHub"><svg class=icon1em><use role=none xlink:href=/assets/icons.svg#github></use></svg></a></ul><button class="hidden greedy-nav__toggle"type=button><span class=visually-hidden>Toggle menu</span><div class=navicon></div></button><ul class="hidden hidden-links"></ul></nav></div></div></div><div class=initial-content><div id=main role=main><div class="sidebar sticky"><nav class=nav__list><input id=ac-toc name=accordion-toc type=checkbox> <label for=ac-toc><svg class="fa-ellipsis-h svg-inline--fa"aria-hidden=true data-icon=ellipsis-h data-prefix=fal focusable=false role=img style=width:32px;height:32px viewBox="0 0 320 512"xmlns=http://www.w3.org/2000/svg><path d="M192 256c0 17.7-14.3 32-32 32s-32-14.3-32-32 14.3-32 32-32 32 14.3 32 32zm88-32c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32zm-240 0c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32z"fill=currentColor></path></svg></label><ul class=nav__items><li><a href=/guides/mathfield-getting-started/ ><span class=nav__sub-title>MathLive</span></a><li><span class=nav__sub-title>MathJSON</span><ul><li><a href=/guides/math-json/ >Introduction</a><li><a href=/guides/math-json-format/ >MathJSON Format</a><li><a href=/guides/math-json-dictionary/ >Dictionary</a></ul><li><span class=nav__sub-title>Compute Engine</span><ul><li><a href=/guides/compute-engine/ >Introduction</a><li><a href=/docs/compute-engine/ >SDK Reference</a></ul><li><span class=nav__sub-title>Dictionary</span><ul><li><a href=/guides/math-json-arithmetic/ >Arithmetic</a><li><a href=/guides/math-json-calculus/ >Calculus</a><li><a href=/guides/math-json-core/ >Core</a><li><a href=/guides/math-json-domains/ >Domains</a><li><a href=/guides/math-json-forms/ >Forms</a><li><a href=/guides/math-json-trigonometry/ >Trigonometry</a></ul><li><span class=nav__sub-title>Contributing</span><ul><li><a href=/docs/reporting-issues/ >Reporting Issues</a><li><a href=/funding/ >Funding</a><li><a href=/docs/code-of-conduct/ >Code of Conduct</a><li><a href=/docs/license/ >License</a></ul></ul></nav><nav class=nav__list><input id=ac-toc name=accordion-toc type=checkbox> <label for=ac-toc><svg class="fa-ellipsis-h svg-inline--fa"aria-hidden=true data-icon=ellipsis-h data-prefix=fal focusable=false role=img style=width:32px;height:32px viewBox="0 0 320 512"xmlns=http://www.w3.org/2000/svg><path d="M192 256c0 17.7-14.3 32-32 32s-32-14.3-32-32 14.3-32 32-32 32 14.3 32 32zm88-32c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32zm-240 0c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32z"fill=currentColor></path></svg></label><ul class=nav__items></ul></nav></div><article class=page itemscope itemtype=https://schema.org/CreativeWork><div class=page__inner-wrap><header></header><section class=page__content itemprop=text><script type=module>import {renderMathInDocument} from '//unpkg.com/mathlive/dist/mathlive.mjs';
    renderMathInDocument();</script><h1>Compute Engine API</h1><h2>Formating</h2><p>A given mathematical expression can be represented in multiple equivalent ways as a MathJSON expression. A <strong>form</strong> is used to specify a representation:<ul><li><strong><code>'full'</code></strong>: only transformations applied are those necessary to make it valid JSON (for example making sure that <code>Infinity</code> and <code>NaN</code> are represented as strings)<li><strong><code>'flatten'</code></strong>: associative functions are combined, e.g. f(f(a, b), c) -> f(a, b, c)<li><strong><code>'sorted'</code></strong>: the arguments of commutative functions are sorted such that: - numbers are first, sorted numerically - complex numbers are next, sorted numerically by imaginary value - symbols are next, sorted lexicographically - <code>add</code> functions are next - <code>multiply</code> functions are next - <code>power</code> functions are next, sorted by their first argument, then by their second argument - other functions follow, sorted lexicographically<li><strong><code>'stripped-metadata'</code></strong>: any metadata associated with elements of the expression is removed.<li><strong><code>'object-literal'</code></strong>: each term of an expression is expressed as an object literal: no shorthand representation is used.<li><strong><code>'canonical-add'</code></strong>: `addition of 0 is simplified, associativity rules are applied, unnecessary groups are moved, single argument ‘add’ are simplified<li><strong><code>'canonical-divide'</code></strong>: <code>divide</code> is replaced with <code>multiply</code> and `power’, division by 1 is simplified,<li><strong><code>'canonical-exp'</code></strong>: <code>exp</code> is replaced with <code>power</code><li><strong><code>'canonical-multiply'</code></strong>: multiplication by 1 or -1 is simplified<li><strong><code>'canonical-power'</code></strong>: <code>power</code> with a first or second argument of 1 is simplified<li><strong><code>'canonical-negate'</code></strong>: real or complex number is replaced by the negative of that number. Negation of negation is simplified.<li><strong><code>'canonical-number'</code></strong>: complex numbers with no imaginary compnents are simplified<li><strong><code>'canonical-root'</code></strong>: <code>root</code> is replaced with <code>power</code><li><strong><code>'canonical-subtract'</code></strong>: <code>subtract</code> is replaced with <code>add</code> and <code>negate</code><li><strong><code>'canonical'</code></strong>: the following transformations are performed, in this order:<ul><li><code>'canonical-number'</code>, -> simplify number<li><code>'canonical-exp'</code>, -> power<li><code>'canonical-root'</code>, -> power, divide<li><code>'canonical-subtract'</code>, -> add, negate, multiply,<li><code>'canonical-divide'</code>, -> multiply, power<li><code>'canonical-power'</code>, -> simplify power<li><code>'canonical-multiply'</code>, -> multiply, power<li><code>'canonical-negate'</code>, -> simplify negate<li><code>'canonical-add'</code>, -> simplify add<li><code>'flatten'</code>, simplify associative, idempotent, involution and groups<li><code>'sorted'</code>,<li><code>'full'</code>,</ul></ul><p>To transform an expression using the rules for a particular form, use the <code>format()</code> function.<pre><code class=language-js><span class=hljs-keyword>import</span> { format } <span class=hljs-keyword>from</span> <span class=hljs-string>'math-json'</span>;

<span class=hljs-built_in>console</span>.log(format([<span class=hljs-string>"Add"</span>, <span class=hljs-number>2</span>, <span class=hljs-string>"x"</span>, <span class=hljs-number>3</span>], <span class=hljs-string>'canonical'</span>);
<span class=hljs-comment>// -> ["Add", 2, 3, "x"]</span>
</code></pre><h2>Evaluating</h2><pre><code class=language-js><span class=hljs-keyword>import</span> { evaluate } <span class=hljs-keyword>from</span> <span class=hljs-string>'math-json'</span>;

<span class=hljs-built_in>console</span>.log(evaluate([<span class=hljs-string>"Add"</span>, <span class=hljs-number>2</span>, <span class=hljs-number>3</span>]);
<span class=hljs-comment>// -> 5</span>
<span class=hljs-built_in>console</span>.log(evaluate([<span class=hljs-string>"Add"</span>, <span class=hljs-number>2</span>, <span class=hljs-string>"x"</span>, <span class=hljs-number>3</span>]);
<span class=hljs-comment>// -> ["Add", 5, x]</span>
</code></pre><h2>Advanced Usage</h2><p>To improve performance, particularly when calling <code>format()</code>/<code>evaluate()</code> repeatedly, use an instance of the <code>ComputeEngine</code> class. When the instance is constructed, the dictionaries defining the symbols are compiled, and subsequent invocations of the <code>format()</code> and <code>evaluate()</code> methods can skip that step.<p>Using a compute engine instance, it is possible to customize which symbol dictionaries are used.<pre><code class=language-js><span class=hljs-keyword>const</span> engine = <span class=hljs-keyword>new</span> ComputeEngine(ComputeEngine.getDictionary(<span class=hljs-string>'arithmetic'</span>));
engine.evalue([<span class=hljs-string>'Add'</span>, <span class=hljs-number>5</span>, <span class=hljs-number>2</span>]);
</code></pre><h2>Comparing</h2><p>Use the <code>compare()</code> function to compare two expressions, or the shorthands <code>equal()</code>, <code>less()</code>, <code>lessEqual()</code>, <code>greater()</code>, <code>greaterEqual()</code>.<p>The comparison between expressions is structural so that $$x + 1$$ is not equal to $$1 + x$$. To obtain the desired result, you may need to apply a canonical form to the expressions, or evaluate them.<pre><code class=language-js><span class=hljs-keyword>const</span> engine = <span class=hljs-keyword>new</span> ComputeEngine();

<span class=hljs-built_in>console</span>.log(engine.equal([<span class=hljs-string>'Add'</span>, <span class=hljs-string>'x'</span>, <span class=hljs-number>1</span>], [<span class=hljs-string>'Add'</span>, <span class=hljs-string>'x'</span>, <span class=hljs-number>1</span>]));
<span class=hljs-comment>// -> true: the two expressions are equal</span>

<span class=hljs-built_in>console</span>.log(engine.equal([<span class=hljs-string>'Add'</span>, <span class=hljs-string>'x'</span>, <span class=hljs-number>1</span>], [<span class=hljs-string>'Add'</span>, <span class=hljs-number>1</span>, <span class=hljs-string>'x'</span>]));
<span class=hljs-comment>// -> false: the two expressions are **not** equal</span>

<span class=hljs-built_in>console</span>.log(engine.equal(
  engine.canonical([<span class=hljs-string>'Add'</span>, <span class=hljs-string>'x'</span>, <span class=hljs-number>1</span>]),
  engine.canonical([<span class=hljs-string>'Add'</span>, <span class=hljs-number>1</span>, <span class=hljs-string>'x'</span>])
);
<span class=hljs-comment>// -> true: the two expressions are equal</span>

<span class=hljs-built_in>console</span>.log(engine.equal(
  [<span class=hljs-string>'Add'</span>, <span class=hljs-number>2</span>, <span class=hljs-number>2</span>],
  [<span class=hljs-string>'Add'</span>, <span class=hljs-number>3</span>, <span class=hljs-number>1</span>]
);
<span class=hljs-comment>// -> false: the two expressions are **not** equal</span>

<span class=hljs-built_in>console</span>.log(engine.equal(
  engine.evaluate([<span class=hljs-string>'Add'</span>, <span class=hljs-number>2</span>, <span class=hljs-number>2</span>]),
  engine.evaluate([<span class=hljs-string>'Add'</span>, <span class=hljs-number>3</span>, <span class=hljs-number>1</span>])
);
<span class=hljs-comment>// -> true: the two expressions are equal</span>
</code></pre><h2>Domains</h2><p>To obtain the domain of an expression, use the <code>domain()</code> function.<pre><code class=language-js><span class=hljs-keyword>const</span> engine = <span class=hljs-keyword>new</span> ComputeEngine();

engine.domain(<span class=hljs-string>'Pi'</span>);
<span class=hljs-comment>// -> "TranscendentalNumber"</span>

engine.domain([<span class=hljs-string>'Add'</span>, <span class=hljs-number>5</span>, <span class=hljs-number>2</span>]);
<span class=hljs-comment>// -> "Number"</span>

engine.domain(engine.evaluate([<span class=hljs-string>'Add'</span>, <span class=hljs-number>5</span>, <span class=hljs-number>2</span>]));
<span class=hljs-comment>// -> "PrimeNumber"</span>
</code></pre></section><footer class=page__meta><meta content="February 19, 2021"itemprop=datePublished><p class=page__date><strong><i aria-hidden=true class="fa-calendar-alt fa-fw fas"></i> Updated:</strong> <time datetime="Fri Feb 19 2021 11:19:34 GMT+0100 (Central European Standard Time)">February 19, 2021</time></footer></div></article></div></div><div class=page__footer id=footer><footer><div class=page__footer-follow><ul class=social-icons><li><a href=https://github.com/cortex-js rel="nofollow noopener noreferrer"><svg class=icon1em><use role=none xlink:href=/assets/icons.svg#github></use></svg>GitHub</a><li><a href=https://gitter.im/cortex-js rel="nofollow noopener noreferrer"><svg class=icon1em><use role=none xlink:href=/assets/icons.svg#gitter></use></svg>Gitter</a></ul></div><div class=page__footer-pages><ul><li><a href=/about rel="nofollow noopener noreferrer">About Us</a></ul></div></footer></div>